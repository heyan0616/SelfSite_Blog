{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[38],{233:function(s,t,a){s.exports=a.p+\"assets/img/dcs-1.57e84d6f.jpg\"},452:function(s,t,a){\"use strict\";a.r(t);var n=a(0),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,n=s._self._c||t;return n(\"ContentSlotsDistributor\",{attrs:{\"slot-key\":s.$parent.slotKey}},[n(\"h1\",{attrs:{id:\"docker-case-springboot项目部署\"}},[n(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#docker-case-springboot项目部署\"}},[s._v(\"#\")]),s._v(\" Docker Case - Springboot项目部署\")]),s._v(\" \"),n(\"p\",[s._v(\"此为Docker实战系列之-部署Springboot项目\")]),s._v(\" \"),n(\"h2\",{attrs:{id:\"准备项目\"}},[n(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#准备项目\"}},[s._v(\"#\")]),s._v(\" 准备项目\")]),s._v(\" \"),n(\"p\",[n(\"strong\",[s._v(\"1. 创建springboot项目\")])]),s._v(\" \"),n(\"div\",{staticClass:\"language-java line-numbers-mode\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-java\"}},[n(\"code\",[n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"package\")]),s._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token namespace\"}},[s._v(\"com\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\".\")]),s._v(\"test\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\".\")]),s._v(\"demo1\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\"\\n\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"import\")]),s._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token namespace\"}},[s._v(\"org\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\".\")]),s._v(\"springframework\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\".\")]),s._v(\"boot\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\".\")]),n(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[s._v(\"SpringApplication\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\"\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"import\")]),s._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token namespace\"}},[s._v(\"org\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\".\")]),s._v(\"springframework\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\".\")]),s._v(\"boot\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\".\")]),s._v(\"autoconfigure\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\".\")]),n(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[s._v(\"SpringBootApplication\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\"\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"import\")]),s._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token namespace\"}},[s._v(\"org\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\".\")]),s._v(\"springframework\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\".\")]),s._v(\"web\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\".\")]),s._v(\"bind\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\".\")]),s._v(\"annotation\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\".\")]),n(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[s._v(\"RequestMapping\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\"\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"import\")]),s._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token namespace\"}},[s._v(\"org\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\".\")]),s._v(\"springframework\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\".\")]),s._v(\"web\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\".\")]),s._v(\"bind\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\".\")]),s._v(\"annotation\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\".\")]),n(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[s._v(\"RestController\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\"\\n\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token annotation punctuation\"}},[s._v(\"@SpringBootApplication\")]),s._v(\"\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token annotation punctuation\"}},[s._v(\"@RestController\")]),s._v(\"\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"public\")]),s._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"class\")]),s._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[s._v(\"Demo1Application\")]),s._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"{\")]),s._v(\"\\n\\n    \"),n(\"span\",{pre:!0,attrs:{class:\"token annotation punctuation\"}},[s._v(\"@RequestMapping\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),n(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v('\"/test\"')]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),s._v(\"\\n    \"),n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"public\")]),s._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[s._v(\"String\")]),s._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"index\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"{\")]),s._v(\"\\n        \"),n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"return\")]),s._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v('\"Hello SpringBoot\"')]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\"\\n    \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"}\")]),s._v(\"\\n\\n    \"),n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"public\")]),s._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"static\")]),s._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"void\")]),s._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"main\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),n(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[s._v(\"String\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"[\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"]\")]),s._v(\" args\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),s._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"{\")]),s._v(\"\\n\\n        \"),n(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[s._v(\"SpringApplication\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\".\")]),n(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"run\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),n(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[s._v(\"Demo1Application\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\".\")]),n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"class\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\" args\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\"\\n    \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"}\")]),s._v(\"\\n\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"}\")]),s._v(\"\\n\")])]),s._v(\" \"),n(\"div\",{staticClass:\"line-numbers-wrapper\"},[n(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"6\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"7\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"8\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"9\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"10\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"11\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"12\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"13\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"14\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"15\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"16\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"17\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"18\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"19\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"20\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"21\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"22\")]),n(\"br\")])]),n(\"p\",[n(\"strong\",[s._v(\"2.打包springboot项目为可执行jar包\")])]),s._v(\" \"),n(\"p\",[s._v(\"demo1-0.0.1-SNAPSHOT.jar\")]),s._v(\" \"),n(\"h2\",{attrs:{id:\"docker部署\"}},[n(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#docker部署\"}},[s._v(\"#\")]),s._v(\" Docker部署\")]),s._v(\" \"),n(\"p\",[s._v(\"这里使用dockerfile来构建springboot项目镜像\")]),s._v(\" \"),n(\"p\",[n(\"strong\",[s._v(\"3. 编写Dockerfile文件\")])]),s._v(\" \"),n(\"div\",{staticClass:\"language-yaml line-numbers-mode\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-yaml\"}},[n(\"code\",[n(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# Docker image for springboot file run\")]),s._v(\"\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# VERSION 0.0.1\")]),s._v(\"\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# Author: heyan\")]),s._v(\"\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 基础镜像使用java\")]),s._v(\"\\nFROM java\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\":\")]),n(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"8\")]),s._v(\"\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 作者\")]),s._v(\"\\nMAINTAINER heyan\\nworkdir /Users/heyan/self/workspace/docker_workspace/demo1\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 将jar包添加到容器中并更名为springbootdemo1.jar\")]),s._v(\"\\nadd demo1\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"-\")]),s._v(\"0.0.1\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"-\")]),s._v(\"SNAPSHOT.jar springbootdemo1.jar\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 运行jar包\")]),s._v(\"\\ncmd java \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"-\")]),s._v(\"jar springbootdemo1.jar\\n\")])]),s._v(\" \"),n(\"div\",{staticClass:\"line-numbers-wrapper\"},[n(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"6\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"7\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"8\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"9\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"10\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"11\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"12\")]),n(\"br\")])]),n(\"blockquote\",[n(\"p\",[n(\"strong\",[s._v(\"WORKDIR\")])]),s._v(\" \"),n(\"p\",[s._v(\"格式： WORKDIR /path\")]),s._v(\" \"),n(\"p\",[s._v(\"为后续的RUN CMD ENTRYPOINT指定配置工作目录，可以使用多个WORKDIR指令，若后续指令用得是相对路径，则会基于之前的命令指定路径\")])]),s._v(\" \"),n(\"p\",[n(\"strong\",[s._v(\"4. 部署文件\")])]),s._v(\" \"),n(\"p\",[s._v(\"将maven打包好的jar包和dockerfile文件复制到服务器的同一文件夹下 （workdir 目录）\")]),s._v(\" \"),n(\"p\",[n(\"strong\",[s._v(\"5. 制作镜像\")])]),s._v(\" \"),n(\"p\",[s._v('执行下面命令， 看好，最后面有个\".\"点！')]),s._v(\" \"),n(\"div\",{staticClass:\"language-sh line-numbers-mode\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-sh\"}},[n(\"code\",[s._v(\"docker build -t springbootdemo4docker \"),n(\"span\",{pre:!0,attrs:{class:\"token builtin class-name\"}},[s._v(\".\")]),s._v(\"\\n\")])]),s._v(\" \"),n(\"div\",{staticClass:\"line-numbers-wrapper\"},[n(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),n(\"br\")])]),n(\"blockquote\",[n(\"font\",{staticStyle:{\"font-size\":\"12px\"}},[n(\"p\",[s._v(\"hy_mac:demo1 heyan$ docker build -t springbootdemo1 .\")]),s._v(\" \"),n(\"p\",[s._v(\"Sending build context to Docker daemon  16.79MB\")]),s._v(\" \"),n(\"p\",[s._v(\"Step 1/6 : FROM java:8\")]),s._v(\" \"),n(\"p\",[s._v(\"---\\x3e d23bdf5b1b1b\")]),s._v(\" \"),n(\"p\",[s._v(\"Step 2/6 : MAINTAINER heyan\")]),s._v(\" \"),n(\"p\",[s._v(\"---\\x3e Running in ea4c80ade7a8\")]),s._v(\" \"),n(\"p\",[s._v(\"Removing intermediate container ea4c80ade7a8\")]),s._v(\" \"),n(\"p\",[s._v(\"---\\x3e 8c5f5c9556fc\")]),s._v(\" \"),n(\"p\",[s._v(\"Step 3/6 : VOLUME /tmp\")]),s._v(\" \"),n(\"p\",[s._v(\"---\\x3e Running in 5c2e325067e8\")]),s._v(\" \"),n(\"p\",[s._v(\"Removing intermediate container 5c2e325067e8\")]),s._v(\" \"),n(\"p\",[s._v(\"---\\x3e 75cde7993860\")]),s._v(\" \"),n(\"p\",[s._v(\"Step 4/6 : workdir /Users/heyan/self/workspace/docker_workspace/demo1\")]),s._v(\" \"),n(\"p\",[s._v(\"---\\x3e Running in fc70ba09eb90\")]),s._v(\" \"),n(\"p\",[s._v(\"Removing intermediate container fc70ba09eb90\")]),s._v(\" \"),n(\"p\",[s._v(\"---\\x3e 91f670d8ed0f\")]),s._v(\" \"),n(\"p\",[s._v(\"Step 5/6 : add demo1-0.0.1-SNAPSHOT.jar springbootdemo1.jar\")]),s._v(\" \"),n(\"p\",[s._v(\"---\\x3e 041fdf5f09d5\")]),s._v(\" \"),n(\"p\",[s._v(\"Step 6/6 : cmd java -jar springbootdemo1.jar\")]),s._v(\" \"),n(\"p\",[s._v(\"---\\x3e Running in c58803923667\")]),s._v(\" \"),n(\"p\",[s._v(\"Removing intermediate container c58803923667\")]),s._v(\" \"),n(\"p\",[s._v(\"---\\x3e 4ed376d2550e\")]),s._v(\" \"),n(\"p\",[s._v(\"Successfully built 4ed376d2550e\")]),s._v(\" \"),n(\"p\",[s._v(\"Successfully tagged springbootdemo1:latest\")])])],1),s._v(\" \"),n(\"p\",[s._v('\"docker images\"命令查看我们制作的镜像')]),s._v(\" \"),n(\"blockquote\",[n(\"font\",{staticStyle:{\"font-size\":\"12px\"}},[n(\"p\",[s._v(\"hy_mac:demo1 heyan$ docker images\")]),s._v(\" \"),n(\"p\",[s._v(\"REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE\")]),s._v(\" \"),n(\"p\",[s._v(\"springbootdemo1     latest              4ed376d2550e        15 minutes ago      660MB\")])])],1),s._v(\" \"),n(\"p\",[n(\"strong\",[s._v(\"6.启动容器\")])]),s._v(\" \"),n(\"div\",{staticClass:\"language-sh line-numbers-mode\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-sh\"}},[n(\"code\",[s._v(\"docker run -d -p \"),n(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"8888\")]),s._v(\":8080 springbootdemo1\\n\")])]),s._v(\" \"),n(\"div\",{staticClass:\"line-numbers-wrapper\"},[n(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),n(\"br\")])]),n(\"blockquote\",[n(\"p\",[s._v(\"-d \"),n(\"strong\",[s._v(\"参数是让容器后台运行\")])]),s._v(\" \"),n(\"p\",[s._v(\"-p \"),n(\"strong\",[s._v(\"是做端口映射，此时将服务器中的8888端口映射到容器中的8080(项目中使用默认端口配置的是8080)端口\")])])]),s._v(\" \"),n(\"p\",[n(\"strong\",[s._v(\"7. 访问网站\")])]),s._v(\" \"),n(\"p\",[s._v(\"如下输入 localhost:8888/test\")]),s._v(\" \"),n(\"div\",{staticStyle:{display:\"flex\"}},[n(\"img\",{staticStyle:{zoom:\"40%\",display:\"block\"},attrs:{src:a(233),alt:\"\",align:\"left\"}})])])}),[],!1,null,null,null);t.default=e.exports}}]);","extractedComments":[]}