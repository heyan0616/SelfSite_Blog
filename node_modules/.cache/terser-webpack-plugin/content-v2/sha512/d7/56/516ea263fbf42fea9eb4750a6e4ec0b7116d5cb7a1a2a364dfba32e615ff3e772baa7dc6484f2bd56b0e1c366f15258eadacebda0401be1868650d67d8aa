{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[100],{498:function(s,a,e){\"use strict\";e.r(a);var r=e(0),t=Object(r.a)({},(function(){var s=this,a=s.$createElement,e=s._self._c||a;return e(\"ContentSlotsDistributor\",{attrs:{\"slot-key\":s.$parent.slotKey}},[e(\"h1\",{attrs:{id:\"博客部署的一些改进\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#博客部署的一些改进\"}},[s._v(\"#\")]),s._v(\" 博客部署的一些改进\")]),s._v(\" \"),e(\"p\",[s._v(\"目前博客的开发流程是\")]),s._v(\" \"),e(\"ul\",[e(\"li\",[s._v(\"本地编写markdown，然后启动vuepress本地服务，查看效果\")]),s._v(\" \"),e(\"li\",[s._v(\"没问题后，build静态文件\")]),s._v(\" \"),e(\"li\",[s._v(\"之后copy到本地docker的html文件夹下面，查看效果\")]),s._v(\" \"),e(\"li\",[s._v(\"最后scp到云服务器的html文件夹下面\")])]),s._v(\" \"),e(\"p\",[s._v(\"等博客基本稳定后，主要就是写markdown然后build上传，所以不需要本地验证了，所以想把build之后的动作自动化掉。步骤如下：\")]),s._v(\" \"),e(\"h4\",{attrs:{id:\"安装sshpass\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#安装sshpass\"}},[s._v(\"#\")]),s._v(\" 安装sshpass\")]),s._v(\" \"),e(\"p\",[s._v(\"为了能在scp时指定密码，写在shell脚本里面，需要先安装辅助工具sshpass，安装步骤（只针对mac系统）\")]),s._v(\" \"),e(\"ul\",[e(\"li\",[s._v(\"下载：http://sourceforge.net/projects/sshpass/files/sshpass/1.06/sshpass-1.06.tar.gz\")]),s._v(\" \"),e(\"li\",[s._v(\"解压到当前文件夹 \"),e(\"code\",[s._v(\"tar -zxvf sshpass-1.06.tar.gz\")])]),s._v(\" \"),e(\"li\",[s._v(\"进入解压后的文件夹 \"),e(\"code\",[s._v(\"cd sshpass-1.06\")])]),s._v(\" \"),e(\"li\",[s._v(\"开始源代码安装第一步:检验环境 \"),e(\"code\",[s._v(\"./configure\")])]),s._v(\" \"),e(\"li\",[s._v(\"编译源代码 \"),e(\"code\",[s._v(\"make&&make install\")])])]),s._v(\" \"),e(\"h4\",{attrs:{id:\"写个脚本release-sh，放到-builds文件夹下\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#写个脚本release-sh，放到-builds文件夹下\"}},[s._v(\"#\")]),s._v(\" 写个脚本release.sh，放到/builds文件夹下\")]),s._v(\" \"),e(\"div\",{staticClass:\"language-sh line-numbers-mode\"},[e(\"pre\",{pre:!0,attrs:{class:\"language-sh\"}},[e(\"code\",[e(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"cp\")]),s._v(\" -rf /Users/heyan/self/workspace/vuepress_workspace/blog/docs/.vuepress/dist/* /Users/heyan/self/workspace/docker_workspace/nginx_blog/html\\n\\nsshpass -p \"),e(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v('\"xxxxxx\"')]),s._v(\" \"),e(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"scp\")]),s._v(\" -r /Users/heyan/self/workspace/docker_workspace/nginx_blog/html/* root@heyan.site:/home/nginx_blog/html\\n\")])]),s._v(\" \"),e(\"div\",{staticClass:\"line-numbers-wrapper\"},[e(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),e(\"br\")])]),e(\"h4\",{attrs:{id:\"修改package-json\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#修改package-json\"}},[s._v(\"#\")]),s._v(\" \"),e(\"strong\",[s._v(\"修改package.json\")])]),s._v(\" \"),e(\"div\",{staticClass:\"language-json line-numbers-mode\"},[e(\"pre\",{pre:!0,attrs:{class:\"language-json\"}},[e(\"code\",[e(\"span\",{pre:!0,attrs:{class:\"token property\"}},[s._v('\"docs:build\"')]),e(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\":\")]),s._v(\" \"),e(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v('\"vuepress build docs && sh ./builds/release.sh\"')]),s._v(\"\\n\")])]),s._v(\" \"),e(\"div\",{staticClass:\"line-numbers-wrapper\"},[e(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),e(\"br\")])]),e(\"br\"),s._v(\" \"),e(\"br\"),s._v(\" \"),e(\"p\",[s._v(\"这样每次run build命令，就会自动build，之后把文件copy到本地的docker目录，再然后上传到远程的docker目录\")]),s._v(\" \"),e(\"div\",{staticClass:\"language-sh line-numbers-mode\"},[e(\"pre\",{pre:!0,attrs:{class:\"language-sh\"}},[e(\"code\",[e(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"npm\")]),s._v(\" run docs:build\\n\")])]),s._v(\" \"),e(\"div\",{staticClass:\"line-numbers-wrapper\"},[e(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),e(\"br\")])])])}),[],!1,null,null,null);a.default=t.exports}}]);","extractedComments":[]}